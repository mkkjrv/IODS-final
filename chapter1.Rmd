#Chapter 1: Introduction to data

This is a analysis of EDA Medical Apppointment No-show data. Data is from [Kaggle](https://www.kaggle.com/joniarroba/noshowappointments). First we are going to have a good overview of the data and then we are going to predict show-ups and no-shows with some statistical modelling.

This analysis is the final assignment of the IODS course. You can find the [GitHub repository here.](https://github.com/mkkjrv/IODS-final). Author of this analysis is Mikko JÃ¤rvi *mikko.jarvi(at)helsinki.fi*

```{r, include = FALSE}
library(ggplot2)
library(GGally)
library(lubridate)
```

##Overview of data##

After cleaning the the original dataset there is 15 variables and 300 000 observations. All the variables were characters in the original dataset. For the analysis the variables were converted as follows. Script for the data wrangling is [here.](https://github.com/mkkjrv/IODS-final/blob/master/data/create_noshow.R)

```{r, echo = FALSE}
noshow <- read.table("data/noshow.txt", header = TRUE, sep = "\t")
noshow$DayOfTheWeek <- factor(noshow$DayOfTheWeek,
        levels = c("Monday", "Tuesday", "Wednesday", "Thursday", "Friday" , "Saturday", "Sunday"))
noshow$AppointmentRegistration <- date(noshow$AppointmentRegistration)
noshow$AppointmentData <- date(noshow$AppointmentData)
noshow$RegYear <- as.factor(noshow$RegYear)
noshow$RegMonth <- as.factor(noshow$RegMonth)
noshow$RegDay <- as.factor(noshow$RegDay)
noshow$AppYear <- as.factor(noshow$AppYear)
noshow$AppMonth <- as.factor(noshow$AppMonth)
noshow$AppDay <- as.factor(noshow$AppDay)
str(noshow)
```

When you look at the variables you could easily divide them for three groups. First group includes basic information about the patient like *age* and *gender*. Second group includes information about the diseases and habits of the patient like *diabetes*, *alcoholism* and wheter patient smokes or not. Third group of variables includes infromation about the time of the registration and the appointment.

###Research question###

In this analysis I'm going to find the factors that influences most on patients no-shows.I'm also going to create statistical model to predict when patient is most likely going to miss the appointment. 


###Status###

```{r, echo = FALSE}
ggplot(noshow, aes(x=Status, fill = Status)) + geom_bar()
``` 

```{r, echo = FALSE }
status_table <- table(noshow$Status)
status_table
```

Propotion of the patients that don't show up is high. Seems that the dataset is not random.

###Sex and age###
```{r}
#a boxplot of high_use, sex and age
g1 <- ggplot(noshow, aes(x = Status, y = Age, col = Gender))
g1 + geom_boxplot() + ggtitle("Patients by age and sex") + xlab("No-show and show up groups") + ylab("Age of patients")
```

It seems that the distribution of age is similar in both patient groups and there is no significant difference between males and females.

##No-Shows in time##

```{r, echo = FALSE}
table_DayOfTheWeek <- table(noshow$Status, noshow$DayOfTheWeek)
addmargins(table_DayOfTheWeek)

ggplot(noshow, aes(x=DayOfTheWeek, fill=Status )) + geom_bar(position="fill") + xlab("Propotions of patients by weekday")
```

